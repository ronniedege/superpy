
# SuperPy

A user friendly command-line tool for tracking supermarket inventory and providing insights to business results. 


## Features

- Register the buying and selling of grocery items
- Keep track of the current inventory, revenue and profit
- Generate and export reports over a given time frame
- Change and store the app's default settings


## Installation

Clone project from Github and install requirements via pip

```bash
pip install -r requirements.txt
```
    
## Usage/Examples

To run the program, always enter python at the start of the command, followed by the script name and then followed by the options. To access the help use:

```bash
python super.py -h
```
### Main functions

The program supports the following main functions:

- `shift` | Advancing (shifting) the system date
- `reset` | Resetting the system date to the current date
- `config` | Change and view the current app's configuration
- `testdata` | Generate bought and sold data for test purposes
- `buy` |  Register newly bought items
- `sell` |  Register newly sold items
- `report` |  Generate inventory, revenue and profit reports

To get help for one of these functions use the `-h` flag, example:

```bash
python super.py sell -h
```

### Advancing the system date

Use this option to move the date to a day in the future (by the given amount of days or the given date) by using the `shift` argument combined with the `-a` | `--amount`  or `-d` | `--date` flag. To advance the current system date with, for example, 10 days, use:

```bash
python super.py shift -a 10
```

or

```bash
python super.py shift -d 2023-10-01
```

The amount of days has to be passed as integer and must be greater then `0`. The date has to be passed as YYYY-MM-DD and has to be equal to or greater then the current date. 

After a successful operation the new system date will be shown in the confirmation message. 

### Resetting the system date

To reset the system date to the current date use the `reset` argument combined with the `-d` | `--date` flag. When the system date is unequal to the current date the date will be reset and a confirmation is shown. 

```bash
python super.py reset -d
```

### Buying an item

For buying a product the `buy` argument is used together with the following mandatory parameters:

- `-n`, `--product_name` | String. For items containing spaces, use double quotes
- `-p`, `--price` | The buying price as float
- `-e`, `--expiration_date` | YYYY-MM-DD. The date must be greater then the current system date
- `-a`, `--amount` | Integer. Optional parameter to enter the amount of products to be bought. Defaults to 1

Example for buying a product:

```bash
python super.py buy -n banana -p 3.99 -e 2023-10-30 -a 10
```

Confirmation (success):
```bash
===> The following item has successfully been added to the database 10 time(s):

+--------------+------------+-------+-----------------+
| Product name |   Buy date | Price | Expiration date |
+--------------+------------+-------+-----------------+
| banana       | 2023-08-29 |  3.99 |      2023-10-30 |
+--------------+------------+-------+-----------------+ 
```


### Selling a product

To sell an item the `sell` argument is used in combination with the following mandatory parameters:

- `-n`, `--product_name` | String. For items containing spaces, use double quotes
- `-p`, `--price` | The selling price as float
- `-a`, `--amount` | Integer. Optional parameter to enter the amount of products to be sold. Defaults to 1

Example for selling a product:

```bash
python super.py sell -n banana -p 7.43 -a 5
```

Confirmation (success):
```bash
===> The following item has successfully been registered as a sale 5 time(s):

+--------------+------------+------------+
| Product name |  Sell date | Sell price |
+--------------+------------+------------+
| banana       | 2023-08-29 |       7.43 |
+--------------+------------+------------+ 
```

### Generate reports

Reports can be generated by using the `report` argument. The app supports three types of reports and can be generated by using the following commands:

- `inventory` | The inventory on a given date
- `revenue` | The total revenue and details within two dates
- `profit` | The total profit and details within two dates

Optional exports will be saved as csv files in the *export* directory of the program.

#### Inventory

To get the inventory report use either one of the following three arguments in combination with the `inventory` argument:

- `-n`, `--now` | The inventory now, based on the current system date
- `-y`, `--yesterday` | Yesterday's inventory, based on the current system date
- `-d`, `--date` | An inventory report on a custom date formatted as YYYY-MM-DD

The following optional arguments can be added to the command:

- `-e`, `--export` | Exports the report data to a csv file
- `-p`, `--product` | Optional product filter to get details about the given product

Example inventory report command with optional export argument

```bash
python super.py report inventory -n -e
```

#### Revenue

To generate a revenue report the start and end date must be provided as arguments in combination with the `revenue` argument. Overview:

- `-f`, `--first` | The mandatory start date of the report as YYYY-MM-DD
- `-l`, `--last` | The mandatory end date of the report as YYYY-MM-DD. Must be greater then or equal to the start date
- `-e`, `--export` | Optional argument to export the report data to a csv file

The report will show the total revenue per product and the total revenue per day, within the given time frame. 

The optional export contains all raw data from within the given time frame. No grouping or calculations will be done.

Example command for generating a revenue report:

```bash
python super.py report revenue -f 2023-07-01 -l 2023-08-20
```

#### Profit

To generate a profit report the start and end date must be provided as arguments in combination with the `profit` argument. Overview:

- `-f`, `--first` | The mandatory start date of the report as YYYY-MM-DD
- `-l`, `--last` | The mandatory end date of the report as YYYY-MM-DD. Must be greater then or equal to the start date
- `-e`, `--export` | Optional argument to export the report data to a csv file

The generated report gives an overview in two perspectives:

1. Profit based on total revenue minus the total costs over the given time frame
2. Profit based on the sold items only, per product

Example command for generating a profit report:

```bash
python super.py report profit -f 2023-07-01 -l 2023-08-08
```

### Change and view the app's configuration

Some of the app's configuration can be manually set to the preferred value by using the `config` argument. Use the `-h` flag to get more info. To show the app's current configuration use: 

```bash
python super.py config -s
```

result:

```bash
Current configuration:

+-------+-------------+---------+-------------------+----------------+
| Sound | Sound theme | Printer | Enable date alert | Validate names |
+-------+-------------+---------+-------------------+----------------+
|  True |   material  |   True  |        True       |      True      |
+-------+-------------+---------+-------------------+----------------+ 
```

The following options are available:

- `sound` | Toggle audiovisual feedback on or off and set the preferred theme. Enabled by default
- `printer` | Sets the way statements are printed. Character by character or normal. Enabled by default
- `alert` | Enable or disable an alert when the system date is unequal to the current date. Enabled by default
- `validate` | Enabling or disabling product name validation to prevent errors. Enabled by default

#### Sound

Use `-e` | `--enable` to enable audiovisual feedback and `-d` | `--disable` for disabling it. The '`-t` | `--theme` flag can be used to set the sound theme. Available themes:

- `big-sur`
- `chime`
- `mario`
- `material` | default
- `pokemon`
- `sonic`
- `zelda`

Example to set the theme to zelda:

```bash
python super.py config sound -t zelda
```

#### Printer

Via this option the way information in the terminal is printed can be set. When enabled text is printed character by character instead of instantly.  By default this option is enabled but it can be turned off by using the `-d` | `--disable` flag. It can be enabled again by the `-e` | `--enable` option. 

Example:

```bash
python super.py config printer --enable
```


#### Alert

When the system date is unequal to the current date an alert will be triggered before selling or buying an item. When enabled the user is asked for confirmation to proceed, or reset the date when dates are unequal. This alert can be disabled by using `-d` | `--disable` for disabling it, or `-e` | `--enable` to enable it again. 

Example:

```bash
python super.py config alert -d
```

#### Validate

When enabled the validate function will compare the product name entered with items in the grocery database and the previously bought items to prevent typos. For example, when a product named *apple* already exists the program will prompt, *did you mean apple?*, when trying to sell a product named *apples*. 

Use `-e` | `--enable` or `-d` | `--disable` to either turn the function on or off. Example:

```bash
python super.py config validate -e
```

### Generate test data files 

This option is for test purposes only. It generates a bought.csv and sold.csv file and can be customized by the following arguments:

- `-s`, `--startdate` | Sets the start date for the csv files (YYYY-MM-DD)
- `-r`, `--rows` | Sets the amount of rows the bought.csv file should have
- `-i`, `--items` | Provide the number of unique product names. 

Based on the given arguments the files will be generated and saved in the *modules/csv_data_test* folder. After each run previously generated files will be overwritten. Both files can be manually moved to the *data* directory. Example command:

```bash
python super.py testdata -s 2023-07-01 -r 7000 -i 75
```

Output:
```bash
===> Generated bought file with 7000 rows at: modules/csv_data_test/bought.csv
===> Generated sold file with 6162 rows at: modules/csv_data_test/sold.csv.
```


